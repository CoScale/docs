---
layout: page
title: Application monitoring
description: Overview of information on how to configure CoScale application monitoring
---

## Configuration

Go the agent page by going to `Datasources > Agent` in the sidebar. Click configure next to the agent you want to update.

### Monitor based on Docker labels

The agent will automatically start to monitor all Docker containers which have a label that starts with `com.coscale.monitoring` and contains a list of plugins and their configuration. These labels can be generated by clicking on the `Generate Docker labels` button under the configuration pane. You can mark an image to be monitored by placing the generated label in your Dockerfile:

{% highlight docker %}
LABEL com.coscale.monitoring='[{"PluginType":"GENERICSCRIPT","Configuration":{"SCRIPT":["/script.sh"]}}]'
{% endhighlight %}

For already existing images the label can also be specified when creating containers, in the `docker run` command via the `--label` or `--label-file` options:

{% highlight bash %}
docker run -d --label com.coscale.monitoring='[{"PluginType":"CASSANDRA","Configuration":{"JMX HOSTNAME":["localhost"],"JMX PORT":["7199"]}}]' cassandra
{% endhighlight %}

Note that if the container's base image already has the 'com.coscale.monitoring' label, adding it again on `docker run` will overwrite the configuration in the base image. If instead want to extend the list of plugins defined in the base image, you can use a different label name in the `docker run` command, for example `com.coscale.monitoring.extra`.

You can find some more example images on our [Github repository](https://github.com/CoScale/docker-adapted), including prebuild images on our [Docker Hub](https://hub.docker.com/u/coscale/).

### Configure the CoScale Docker agent with image detection

An alternative option is to add each Docker image that you would like to monitor to our UI, you also need to add a set of plugins to be installed when a container with your image is running. Our image and tag detection can use wildcards, so "jboss-*" will trigger on all images that start with "jboss". After adding a plugin, you will receive instructions on how to setup your Docker container so that our agent can monitor it.

<img src="{{ site.baseurl}}/gfx/agent/plugins/docker/configuration.png" alt="Screenshot of Docker configuration" class="img-responsive" />
