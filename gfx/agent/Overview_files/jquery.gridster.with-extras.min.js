/*! gridster.js - v0.6.10 - 2015-08-05
* https://dsmorse.github.io/gridster.js/
* Copyright (c) 2015 ducksboard; Licensed MIT */
(function(a,b){if(typeof exports==="object"){module.exports=b(require("jquery"))}else{if(typeof define==="function"&&define.amd){define("gridster-coords",["jquery"],b)}else{a.GridsterCoords=b(a.$||a.jQuery)}}}(this,function(c){function a(d){if(d[0]&&c.isPlainObject(d[0])){this.data=d[0]}else{this.el=d}this.isCoords=true;this.coords={};this.init();return this}var b=a.prototype;b.init=function(){this.set();this.original_coords=this.get()};b.set=function(i,e){var f=this.el;if(f&&!i){this.data=f.offset();this.data.width=f.width();this.data.height=f.height()}if(f&&i&&!e){var h=f.offset();this.data.top=h.top;this.data.left=h.left}var g=this.data;if(g.left===undefined){g.left=g.x1}if(g.top===undefined){g.top=g.y1}this.coords.x1=g.left;this.coords.y1=g.top;this.coords.x2=g.left+g.width;this.coords.y2=g.top+g.height;this.coords.cx=g.left+(g.width/2);this.coords.cy=g.top+(g.height/2);this.coords.width=g.width;this.coords.height=g.height;this.coords.el=f||false;return this};b.update=function(e){if(!e&&!this.el){return this}if(e){var d=c.extend({},this.data,e);this.data=d;return this.set(true,true)}this.set(true);return this};b.get=function(){return this.coords};b.destroy=function(){this.el.removeData("coords");delete this.el};c.fn.coords=function(){if(this.data("coords")){return this.data("coords")}var d=new a(this);this.data("coords",d);return d};return a}));(function(a,b){if(typeof exports==="object"){module.exports=b(require("jquery"))}else{if(typeof define==="function"&&define.amd){define("gridster-collision",["jquery","gridster-coords"],b)}else{a.GridsterCollision=b(a.$||a.jQuery,a.GridsterCoords)}}}(this,function(c,a){var d={colliders_context:document.body,overlapping_region:"C"};function e(g,h,f){this.options=c.extend(d,f);this.$element=g;this.last_colliders=[];this.last_colliders_coords=[];this.set_colliders(h);this.init()}e.defaults=d;var b=e.prototype;b.init=function(){this.find_collisions()};b.overlaps=function(h,g){var f=false;var i=false;if((g.x1>=h.x1&&g.x1<=h.x2)||(g.x2>=h.x1&&g.x2<=h.x2)||(h.x1>=g.x1&&h.x2<=g.x2)){f=true}if((g.y1>=h.y1&&g.y1<=h.y2)||(g.y2>=h.y1&&g.y2<=h.y2)||(h.y1>=g.y1&&h.y2<=g.y2)){i=true}return(f&&i)};b.detect_overlapping_region=function(g,f){var i="";var h="";if(g.y1>f.cy&&g.y1<f.y2){i="N"}if(g.y2>f.y1&&g.y2<f.cy){i="S"}if(g.x1>f.cx&&g.x1<f.x2){h="W"}if(g.x2>f.x1&&g.x2<f.cx){h="E"}return(i+h)||"C"};b.calculate_overlapped_area_coords=function(g,f){var i=Math.max(g.x1,f.x1);var k=Math.max(g.y1,f.y1);var h=Math.min(g.x2,f.x2);var j=Math.min(g.y2,f.y2);return c({left:i,top:k,width:(h-i),height:(j-k)}).coords().get()};b.calculate_overlapped_area=function(f){return(f.width*f.height)};b.manage_colliders_start_stop=function(n,l,o){var m=this.last_colliders_coords;for(var k=0,f=m.length;k<f;k++){if(c.inArray(m[k],n)===-1){l.call(this,m[k])}}for(var g=0,h=n.length;g<h;g++){if(c.inArray(n[g],m)===-1){o.call(this,n[g])}}};b.find_collisions=function(q){var s=this;var j=this.options.overlapping_region;var k=[];var l=[];var n=(this.colliders||this.$colliders);var o=n.length;var h=s.$element.coords().update(q||false).get();while(o--){var f=s.$colliders?c(n[o]):n[o];var u=(f.isCoords)?f:f.coords();var t=u.get();var i=s.overlaps(h,t);if(!i){continue}var p=s.detect_overlapping_region(h,t);if(p===j||j==="all"){var r=s.calculate_overlapped_area_coords(h,t);var g=s.calculate_overlapped_area(r);if(0!==g){var m={area:g,area_coords:r,region:p,coords:t,player_coords:h,el:f};if(s.options.on_overlap){s.options.on_overlap.call(this,m)}k.push(u);l.push(m)}}}if(s.options.on_overlap_stop||s.options.on_overlap_start){this.manage_colliders_start_stop(k,s.options.on_overlap_start,s.options.on_overlap_stop)}this.last_colliders_coords=k;return l};b.get_closest_colliders=function(f){var g=this.find_collisions(f);g.sort(function(i,h){if(i.region==="C"&&h.region==="C"){if(i.coords.y1<h.coords.y1||i.coords.x1<h.coords.x1){return -1}else{return 1}}if(i.area<h.area){return 1}return 1});return g};b.set_colliders=function(f){if(typeof f==="string"||f instanceof c){this.$colliders=c(f,this.options.colliders_context).not(this.$element)}else{this.colliders=c(f)}};c.fn.collision=function(g,f){return new e(this,g,f)};return e}));(function(a,b){a.delay=function(d,e){var c=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return d.apply(null,c)},e)};a.debounce=function(d,f,c){var e;return function(){var i=this,h=arguments;var g=function(){e=null;if(!c){d.apply(i,h)}};if(c&&!e){d.apply(i,h)}clearTimeout(e);e=setTimeout(g,f)}};a.throttle=function(e,f){var d,h,i,j,g,k;var c=debounce(function(){g=j=false},f);return function(){d=this;h=arguments;var l=function(){i=null;if(g){e.apply(d,h)}c()};if(!i){i=setTimeout(l,f)}if(j){g=true}else{k=e.apply(d,h)}c();j=true;return k}}})(window);(function(a,b){if(typeof exports==="object"){module.exports=b(require("jquery"))}else{if(typeof define==="function"&&define.amd){define("gridster-draggable",["jquery"],b)
}else{a.GridsterDraggable=b(a.$||a.jQuery)}}}(this,function(f){var d={items:"li",distance:1,limit:true,offset_left:0,autoscroll:true,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:true,helper:false,remove_helper:true};var b=f(window);var j={x:"left",y:"top"};var e=!!("ontouchstart" in window);var g=function(k){return k.charAt(0).toUpperCase()+k.slice(1)};var c=0;var i=function(){return ++c+""};function a(l,k){this.options=f.extend({},d,k);this.$document=f(document);this.$container=f(l);this.$scroll_container=this.options.scroll_container===window?f(window):this.$container.closest(this.options.scroll_container);this.is_dragging=false;this.player_min_left=0+this.options.offset_left;this.id=i();this.ns=".gridster-draggable-"+this.id;this.init()}a.defaults=d;var h=a.prototype;h.init=function(){var k=this.$container.css("position");this.calculate_dimensions();this.$container.css("position",k==="static"?"relative":k);this.disabled=false;this.events();b.bind(this.nsEvent("resize"),throttle(f.proxy(this.calculate_dimensions,this),200))};h.nsEvent=function(k){return(k||"")+this.ns};h.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")};this.$container.on(this.nsEvent("selectstart"),f.proxy(this.on_select_start,this));this.$container.on(this.pointer_events.start,this.options.items,f.proxy(this.drag_handler,this));this.$document.on(this.pointer_events.end,f.proxy(function(k){this.is_dragging=false;if(this.disabled){return}this.$document.off(this.pointer_events.move);if(this.drag_start){this.on_dragstop(k)}},this))};h.get_actual_pos=function(k){return k.position()};h.get_mouse_pos=function(k){if(k.originalEvent&&k.originalEvent.touches){var l=k.originalEvent;k=l.touches.length?l.touches[0]:l.changedTouches[0]}return{left:k.clientX,top:k.clientY}};h.get_offset=function(p){p.preventDefault();var k=this.get_mouse_pos(p);var o=Math.round(k.left-this.mouse_init_pos.left);var l=Math.round(k.top-this.mouse_init_pos.top);var n=Math.round(this.el_init_offset.left+o-this.baseX+this.$scroll_container.scrollLeft()-this.scroll_container_offset_x);var m=Math.round(this.el_init_offset.top+l-this.baseY+this.$scroll_container.scrollTop()-this.scroll_container_offset_y);if(this.options.limit){if(n>this.player_max_left){n=this.player_max_left}else{if(n<this.player_min_left){n=this.player_min_left}}}return{position:{left:n,top:m},pointer:{left:k.left,top:k.top,diff_left:o+(this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),diff_top:l+(this.$scroll_container.scrollTop()-this.scroll_container_offset_y)}}};h.get_drag_data=function(k){var l=this.get_offset(k);l.$player=this.$player;l.$helper=this.helper?this.$helper:this.$player;return l};h.set_limits=function(k){k||(k=this.$container.width());this.player_max_left=(k-this.player_width+-this.options.offset_left);this.options.container_width=k;return this};h.scroll_in=function(l,B){var p=j[l];var t=50;var y=30;var m="scroll"+g(p);var k=l==="x";var o=k?this.scroller_width:this.scroller_height;var r;if(this.$scroll_container===window){r=k?this.$scroll_container.width():this.$scroll_container.height()}else{r=k?this.$scroll_container[0].scrollWidth:this.$scroll_container[0].scrollHeight}var A=k?this.$player.width():this.$player.height();var q;var v=this.$scroll_container[m]();var x=v;var s=x+o;var w=s-t;var u=x+t;var n=x+B.pointer[p];var z=(r-o+A);if(n>=w){q=v+y;if(q<z){this.$scroll_container[m](q);this["scroll_offset_"+l]+=y}}if(n<=u){q=v-y;if(q>0){this.$scroll_container[m](q);this["scroll_offset_"+l]-=y}}return this};h.manage_scroll=function(k){this.scroll_in("x",k);this.scroll_in("y",k)};h.calculate_dimensions=function(){this.scroller_height=this.$scroll_container.height();this.scroller_width=this.$scroll_container.width()};h.drag_handler=function(l){if(this.disabled||l.which!==1&&!e){return}if(this.ignore_drag(l)){return}var k=this;var m=true;this.$player=f(l.currentTarget);this.el_init_pos=this.get_actual_pos(this.$player);this.mouse_init_pos=this.get_mouse_pos(l);this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top;this.$document.on(this.pointer_events.move,function(q){var n=k.get_mouse_pos(q);var p=Math.abs(n.left-k.mouse_init_pos.left);var o=Math.abs(n.top-k.mouse_init_pos.top);if(!(p>k.options.distance||o>k.options.distance)){return false}if(m){m=false;k.on_dragstart.call(k,q);return false}if(k.is_dragging===true){k.on_dragmove.call(k,q)}return false});if(!e){return false}};h.on_dragstart=function(k){k.preventDefault();if(this.is_dragging){return this}this.drag_start=this.is_dragging=true;var l=this.$container.offset();this.baseX=Math.round(l.left);this.baseY=Math.round(l.top);if(this.options.helper==="clone"){this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper");this.helper=true}else{this.helper=false}this.scroll_container_offset_y=this.$scroll_container.scrollTop();
this.scroll_container_offset_x=this.$scroll_container.scrollLeft();this.el_init_offset=this.$player.offset();this.player_width=this.$player.width();this.set_limits(this.options.container_width);if(this.options.start){this.options.start.call(this.$player,k,this.get_drag_data(k))}return false};h.on_dragmove=function(l){var k=this.get_drag_data(l);this.options.autoscroll&&this.manage_scroll(k);if(this.options.move_element){(this.helper?this.$helper:this.$player).css({position:"absolute",left:k.position.left,top:k.position.top})}var m=this.last_position||k.position;k.prev_position=m;if(this.options.drag){this.options.drag.call(this.$player,l,k)}this.last_position=k.position;return false};h.on_dragstop=function(l){var k=this.get_drag_data(l);this.drag_start=false;if(this.options.stop){this.options.stop.call(this.$player,l,k)}if(this.helper&&this.options.remove_helper){this.$helper.remove()}return false};h.on_select_start=function(k){if(this.disabled){return}if(this.ignore_drag(k)){return}return false};h.enable=function(){this.disabled=false};h.disable=function(){this.disabled=true};h.destroy=function(){this.disable();this.$container.off(this.ns);this.$document.off(this.ns);b.off(this.ns);f.removeData(this.$container,"drag")};h.ignore_drag=function(k){if(this.options.handle){return !f(k.target).is(this.options.handle)}if(f.isFunction(this.options.ignore_dragging)){return this.options.ignore_dragging(k)}if(this.options.resize){return !f(k.target).is(this.options.items)}return f(k.target).is(this.options.ignore_dragging.join(", "))};f.fn.gridDraggable=function(k){return new a(this,k)};f.fn.dragg=function(k){return this.each(function(){if(!f.data(this,"drag")){f.data(this,"drag",new a(this,k))}})};return a}));(function(a,b){if(typeof exports==="object"){module.exports=b(require("jquery"),require("./jquery.draggable.js"),require("./jquery.collision.js"),require("./jquery.coords.js"),require("./utils.js"))}else{if(typeof define==="function"&&define.amd){define(["jquery","gridster-draggable","gridster-collision"],b)}else{a.Gridster=b(a.$||a.jQuery,a.GridsterDraggable,a.GridsterCollision)}}}(this,function(e,a,h){var g=e(window),f={namespace:"",widget_selector:"li",static_class:"static",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:Infinity,min_rows:1,max_rows:15,autogenerate_stylesheet:true,avoid_overlapped_widgets:true,auto_init:true,center_widgets:false,responsive_breakpoint:false,scroll_container:window,shift_larger_widgets_down:true,shift_widgets_up:true,show_element:function(i,j){if(j){i.fadeIn(j)}else{i.fadeIn()}},hide_element:function(i,j){if(j){i.fadeOut(j)}else{i.fadeOut()}},serialize_params:function(j,i){return{col:i.col,row:i.row,size_x:i.size_x,size_y:i.size_y}},collision:{wait_for_mouseup:false},draggable:{items:".gs-w:not(.static)",distance:4,ignore_dragging:a.defaults.ignore_dragging.slice(0)},resize:{enabled:false,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[Infinity,Infinity],min_size:[1,1]}};function d(j,i){this.options=e.extend(true,{},f,i);this.options.draggable=this.options.draggable||{};this.options.draggable=e.extend(true,{},this.options.draggable,{scroll_container:this.options.scroll_container});this.$el=e(j);this.$scroll_container=this.options.scroll_container===window?e(window):this.$el.closest(this.options.scroll_container);this.$wrapper=this.$el.parent();this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w");this.$changed=e([]);this.w_queue={};if(this.is_responsive()){this.min_widget_width=this.get_responsive_col_width()}else{this.min_widget_width=this.options.widget_base_dimensions[0]}this.min_widget_height=this.options.widget_base_dimensions[1];this.min_col_count=this.options.min_cols;this.prev_col_count=this.min_col_count;this.generated_stylesheets=[];this.$style_tags=e([]);this.options.auto_init&&this.init()}d.defaults=f;d.generated_stylesheets=[];function b(n){var m=["col","row","size_x","size_y"];var l={};for(var k=0,j=m.length;k<j;k++){var p=m[k];if(!(p in n)){throw new Error("Not exists property `"+p+"`")}var o=n[p];if(!o||isNaN(o)){throw new Error("Invalid value of `"+p+"` property")}l[p]=+o}return l}d.sort_by_row_asc=function(i){i=i.sort(function(k,j){if(!k.row){k=e(k).coords().grid;j=e(j).coords().grid}k=b(k);j=b(j);if(k.row>j.row){return 1}return -1});return i};d.sort_by_row_and_col_asc=function(i){i=i.sort(function(k,j){k=b(k);j=b(j);if(k.row>j.row||k.row===j.row&&k.col>j.col){return 1}return -1});return i};d.sort_by_col_asc=function(i){i=i.sort(function(k,j){k=b(k);j=b(j);if(k.col>j.col){return 1}return -1});return i};d.sort_by_row_desc=function(i){i=i.sort(function(k,j){k=b(k);j=b(j);if(k.row+k.size_y<j.row+j.size_y){return 1}return -1});return i};var c=d.prototype;c.init=function(){this.options.resize.enabled&&this.setup_resize();this.generate_grid_and_stylesheet();this.get_widgets_from_DOM();this.set_dom_grid_height();this.set_dom_grid_width();this.$wrapper.addClass("ready");
this.draggable();this.options.resize.enabled&&this.resizable();if(this.options.center_widgets){setTimeout(e.proxy(function(){this.center_widgets()},this),0)}g.bind("resize.gridster",debounce(e.proxy(this.recalculate_faux_grid,this),200))};c.disable=function(){this.$wrapper.find(".player-revert").removeClass("player-revert");this.drag_api.disable();return this};c.enable=function(){this.drag_api.enable();return this};c.disable_resize=function(){this.$el.addClass("gs-resize-disabled");this.resize_api.disable();return this};c.enable_resize=function(){this.$el.removeClass("gs-resize-disabled");this.resize_api.enable();return this};c.add_widget=function(m,t,r,j,s,n,q,p,i){var o;t||(t=1);r||(r=1);if(typeof(i)!=="boolean"){i=true}if(!j&&!s){o=this.next_position(t,r)}else{o={col:j,row:s,size_x:t,size_y:r};if(this.options.avoid_overlapped_widgets){this.empty_cells(j,s,t,r)}}var k=e(m).attr({"data-resizable":i,"data-col":o.col,"data-row":o.row,"data-sizex":t,"data-sizey":r}).addClass("gs-w").appendTo(this.$el).hide();this.$widgets=this.$widgets.add(k);this.$changed=this.$changed.add(k);this.register_widget(k);var l=parseInt(o.row)+(parseInt(o.size_y)-1);if(this.rows<l){this.add_faux_rows(l-this.rows)}if(n){this.set_widget_max_size(k,n)}if(q){this.set_widget_min_size(k,q)}this.set_dom_grid_width();this.set_dom_grid_height();this.drag_api.set_limits((this.cols*this.min_widget_width)+((this.cols+1)*this.options.widget_margins[0]));if(this.options.center_widgets){setTimeout(e.proxy(function(){this.center_widgets()},this),0)}this.options.show_element.call(this,k,p);return k};c.set_widget_min_size=function(k,j){k=typeof k==="number"?this.$widgets.eq(k):k;if(!k.length){return this}var i=k.data("coords").grid;i.min_size_x=j[0];i.min_size_y=j[1];return this};c.set_widget_max_size=function(k,j){k=typeof k==="number"?this.$widgets.eq(k):k;if(!k.length){return this}var i=k.data("coords").grid;i.max_size_x=j[0];i.max_size_y=j[1];return this};c.add_resize_handle=function(j){var i=this.options.resize.handle_append_to?e(this.options.resize.handle_append_to,j):j;if((i.children("span[class~='"+this.resize_handle_class+"']")).length===0){e(this.resize_handle_tpl).appendTo(i)}return this};c.resize_widget=function(n,k,i,m){var j=n.coords().grid;k||(k=j.size_x);i||(i=j.size_y);if(!this.is_valid_row(j.row,i)){this.add_faux_rows(Math.max(this.calculate_highest_row(j.row,i)-this.rows,0))}if(!this.is_valid_col(j.col,i)){this.add_faux_cols(Math.max(this.calculate_highest_row(j.col,k)-this.cols,0))}var l={col:j.col,row:j.row,size_x:k,size_y:i};this.mutate_widget_in_gridmap(n,j,l);this.set_dom_grid_height();this.set_dom_grid_width();if(m){m.call(this,l.size_x,l.size_y)}return n};c.expand_widget=function(i,r,q,j,p){var l=i.coords().grid;var m=Math.floor((e(window).width()-this.options.widget_margins[0]*2)/this.min_widget_width);r=r||Math.min(m,this.cols);q||(q=l.size_y);var n=l.size_y;i.attr("pre_expand_col",l.col);i.attr("pre_expand_sizex",l.size_x);i.attr("pre_expand_sizey",l.size_y);var k=j||1;if(q>n){this.add_faux_rows(Math.max(q-n,0))}var o={col:k,row:l.row,size_x:r,size_y:q};this.mutate_widget_in_gridmap(i,l,o);this.set_dom_grid_height();this.set_dom_grid_width();if(p){p.call(this,o.size_x,o.size_y)}return i};c.collapse_widget=function(o,n){var k=o.coords().grid;var j=parseInt(o.attr("pre_expand_sizex"));var i=parseInt(o.attr("pre_expand_sizey"));var m=parseInt(o.attr("pre_expand_col"));var l={col:m,row:k.row,size_x:j,size_y:i};this.mutate_widget_in_gridmap(o,k,l);this.set_dom_grid_height();this.set_dom_grid_width();if(n){n.call(this,l.size_x,l.size_y)}return o};c.fit_to_content=function(i,m,p,r){var o=i.coords().grid;var k=this.$wrapper.width();var s=this.$wrapper.height();var l=this.options.widget_base_dimensions[0]+(2*this.options.widget_margins[0]);var j=this.options.widget_base_dimensions[1]+(2*this.options.widget_margins[1]);var n=Math.ceil((k+(2*this.options.widget_margins[0]))/l);var t=Math.ceil((s+(2*this.options.widget_margins[1]))/j);var q={col:o.col,row:o.row,size_x:Math.min(m,n),size_y:Math.min(p,t)};this.mutate_widget_in_gridmap(i,o,q);this.set_dom_grid_height();this.set_dom_grid_width();if(r){r.call(this,q.size_x,q.size_y)}return i};c.center_widgets=debounce(function(){var i=this.$wrapper.width();var j;if(this.is_responsive()){j=this.get_responsive_col_width()}else{j=this.options.widget_base_dimensions[0]+(2*this.options.widget_margins[0])}var k=Math.floor(Math.max(Math.floor(i/j),this.min_col_count)/2)*2;this.options.min_cols=k;this.options.max_cols=k;this.options.extra_cols=0;this.set_dom_grid_width(k);this.cols=k;var l=(k-this.prev_col_count)/2;if(l<0){if(this.get_min_col()>l*-1){this.shift_cols(l)}else{this.resize_widget_dimensions(this.options)}setTimeout(e.proxy(function(){this.resize_widget_dimensions(this.options)},this),0)}else{if(l>0){this.resize_widget_dimensions(this.options);setTimeout(e.proxy(function(){this.shift_cols(l)},this),0)}else{this.resize_widget_dimensions(this.options);setTimeout(e.proxy(function(){this.resize_widget_dimensions(this.options)
},this),0)}}this.prev_col_count=k;return this},200);c.get_min_col=function(){return Math.min.apply(Math,this.$widgets.map(e.proxy(function(i,j){return this.get_cells_occupied(e(j).coords().grid).cols},this)).get())};c.shift_cols=function(j){var i=this.$widgets.map(e.proxy(function(k,m){var l=e(m);return this.dom_to_coords(l)},this));i=d.sort_by_row_and_col_asc(i);i.each(e.proxy(function(n,o){var p=e(o.el);var l=p.coords().grid;var k=parseInt(p.attr("data-col"));var m={col:Math.max(Math.round(k+j),1),row:l.row,size_x:l.size_x,size_y:l.size_y};setTimeout(e.proxy(function(){this.mutate_widget_in_gridmap(p,l,m)},this),0)},this))};c.resize_widget_dimensions=function(i){if(i.widget_margins){this.options.widget_margins=i.widget_margins}if(i.widget_base_dimensions){this.options.widget_base_dimensions=i.widget_base_dimensions}this.min_widget_width=(this.options.widget_margins[0]*2)+this.options.widget_base_dimensions[0];this.min_widget_height=(this.options.widget_margins[1]*2)+this.options.widget_base_dimensions[1];this.$widgets.each(e.proxy(function(j,k){var l=e(k);this.resize_widget(l)},this));this.generate_grid_and_stylesheet();this.get_widgets_from_DOM();this.set_dom_grid_height();return this};c.mutate_widget_in_gridmap=function(i,p,k){var s=p.size_y;var u=this.get_cells_occupied(p);var n=this.get_cells_occupied(k);var j=[];e.each(u.cols,function(x,w){if(e.inArray(w,n.cols)===-1){j.push(w)}});var o=[];e.each(n.cols,function(x,w){if(e.inArray(w,u.cols)===-1){o.push(w)}});var m=[];e.each(u.rows,function(w,x){if(e.inArray(x,n.rows)===-1){m.push(x)}});var r=[];e.each(n.rows,function(w,x){if(e.inArray(x,u.rows)===-1){r.push(x)}});this.remove_from_gridmap(p);if(o.length){var l=[k.col,k.row,k.size_x,Math.min(s,k.size_y),i];this.empty_cells.apply(this,l)}if(r.length){var v=[k.col,k.row,k.size_x,k.size_y,i];this.empty_cells.apply(this,v)}p.col=k.col;p.row=k.row;p.size_x=k.size_x;p.size_y=k.size_y;this.add_to_gridmap(k,i);i.removeClass("player-revert");this.update_widget_dimensions(i,k);if(j.length){var q=[j[0],k.row,j[j.length-1]-j[0]+1,Math.min(s,k.size_y),i];this.remove_empty_cells.apply(this,q)}if(m.length){var t=[k.col,k.row,k.size_x,k.size_y,i];this.remove_empty_cells.apply(this,t)}this.move_widget_up(i);return this};c.empty_cells=function(l,m,k,j,n){var i=this.widgets_below({col:l,row:m-j,size_x:k,size_y:j});i.not(n).each(e.proxy(function(q,o){var r=e(o),p=r.coords().grid;if(!(p.row<=(m+j-1))){return}var s=(m+j)-p.row;this.move_widget_down(r,s)},this));this.set_dom_grid_height();return this};c.remove_empty_cells=function(m,n,l,k,j){var i=this.widgets_below({col:m,row:n,size_x:l,size_y:k});i.not(j).each(e.proxy(function(o,p){this.move_widget_up(e(p),k)},this));this.set_dom_grid_height();return this};c.next_position=function(q,p){q||(q=1);p||(p=1);var o=this.gridmap;var n=o.length;var m=[];var j;for(var l=1;l<n;l++){j=o[l].length;for(var i=1;i<=j;i++){var k=this.can_move_to({size_x:q,size_y:p},l,i);if(k){m.push({col:l,row:i,size_y:p,size_x:q})}}}if(m.length){return d.sort_by_row_and_col_asc(m)[0]}return false};c.remove_by_grid=function(i,k){var j=this.is_widget(i,k);if(j){this.remove_widget(j)}};c.remove_widget=function(m,j,n){var l=m instanceof e?m:e(m);if(l.length===0){return this}var k=l.coords().grid;if(k===undefined){return this}if(e.isFunction(j)){n=j;j=false}this.cells_occupied_by_placeholder={};this.$widgets=this.$widgets.not(l);var i=this.widgets_below(l);this.remove_from_gridmap(k);this.options.hide_element.call(this,l,e.proxy(function(){l.remove();if(!j){i.each(e.proxy(function(o,p){this.move_widget_up(e(p),k.size_y)},this))}this.set_dom_grid_height();if(n){n.call(this,m)}},this));return this};c.remove_all_widgets=function(i){this.$widgets.each(e.proxy(function(j,k){this.remove_widget(k,true,i)},this));return this};c.serialize=function(j){j||(j=this.$widgets);var i=[];j.each(e.proxy(function(k,m){var l=e(m);if(typeof(l.coords().grid)!=="undefined"){i.push(this.options.serialize_params(l,l.coords().grid))}},this));return i};c.serialize_changed=function(){return this.serialize(this.$changed)};c.dom_to_coords=function(i){return{col:parseInt(i.attr("data-col"),10),row:parseInt(i.attr("data-row"),10),size_x:parseInt(i.attr("data-sizex"),10)||1,size_y:parseInt(i.attr("data-sizey"),10)||1,max_size_x:parseInt(i.attr("data-max-sizex"),10)||false,max_size_y:parseInt(i.attr("data-max-sizey"),10)||false,min_size_x:parseInt(i.attr("data-min-sizex"),10)||false,min_size_y:parseInt(i.attr("data-min-sizey"),10)||false,el:i}};c.register_widget=function(l){var m=l instanceof e;var j=m?this.dom_to_coords(l):l;var i=false;m||(l=j.el);var k=l.attr("data-resizable");var n=this.can_go_widget_up(j);if(this.options.shift_widgets_up&&n){j.row=n;l.attr("data-row",n);this.$el.trigger("gridster:positionchanged",[j]);i=true}if(this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:j.size_x,size_y:j.size_y},j.col,j.row)){e.extend(j,this.next_position(j.size_x,j.size_y));l.attr({"data-col":j.col,"data-row":j.row,"data-sizex":j.size_x,"data-sizey":j.size_y});
i=true}l.data("coords",l.coords());l.data("coords").grid=j;this.add_to_gridmap(j,l);this.update_widget_dimensions(l,j);this.options.resize.enabled&&(k==="true")&&this.add_resize_handle(l);return i};c.update_widget_position=function(i,j){this.for_each_cell_occupied(i,function(k,l){if(!this.gridmap[k]){return this}this.gridmap[k][l]=j});return this};c.update_widget_dimensions=function(l,j){var k=(j.size_x*(this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0])+((j.size_x-1)*this.options.widget_margins[0]));var i=(j.size_y*this.options.widget_base_dimensions[1]+((j.size_y-1)*this.options.widget_margins[1]));l.data("coords").update({width:k,height:i});l.attr({"data-col":j.col,"data-row":j.row,"data-sizex":j.size_x,"data-sizey":j.size_y});return this};c.update_widgets_dimensions=function(){e.each(this.$widgets,e.proxy(function(i,k){var j=e(k).coords().grid;if(typeof(j)!=="object"){return}this.update_widget_dimensions(e(k),j)},this));return this};c.remove_from_gridmap=function(i){return this.update_widget_position(i,false)};c.add_to_gridmap=function(i,j){this.update_widget_position(i,j||i.el)};c.draggable=function(){var i=this;var j=e.extend(true,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:(this.cols*this.min_widget_width)+((this.cols+1)*this.options.widget_margins[0]),limit:true,start:function(k,l){i.$widgets.filter(".player-revert").removeClass("player-revert");i.$player=e(this);i.$helper=e(l.$helper);i.helper=!i.$helper.is(i.$player);i.on_start_drag.call(i,k,l);i.$el.trigger("gridster:dragstart")},stop:function(k,l){i.on_stop_drag.call(i,k,l);i.$el.trigger("gridster:dragstop")},drag:throttle(function(k,l){i.on_drag.call(i,k,l);i.$el.trigger("gridster:drag")},60)});this.drag_api=this.$el.dragg(j).data("drag")};c.resizable=function(){this.resize_api=this.$el.gridDraggable({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:false,resize:true,limit:this.options.max_cols!==Infinity,scroll_container:this.options.scroll_container,start:e.proxy(this.on_start_resize,this),stop:e.proxy(function(i,j){delay(e.proxy(function(){this.on_stop_resize(i,j)},this),120)},this),drag:throttle(e.proxy(this.on_resize,this),60)});return this};c.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var j=this.options.resize.axes;var i='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';this.resize_handle_tpl=e.map(j,function(k){return i.replace("{type}",k)}).join("");if(e.isArray(this.options.draggable.ignore_dragging)){this.options.draggable.ignore_dragging.push("."+this.resize_handle_class)}return this};c.on_start_drag=function(k,m){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging");this.highest_col=this.get_highest_occupied_cell().col;this.$player.addClass("player");this.player_grid_data=this.$player.coords().grid;this.placeholder_grid_data=e.extend({},this.player_grid_data);this.set_dom_grid_height(this.$el.height()+(this.player_grid_data.size_y*this.min_widget_height));this.set_dom_grid_width(this.cols);var n=this.player_grid_data.size_x;var i=this.cols-this.highest_col;if(this.options.max_cols===Infinity&&i<=n){this.add_faux_cols(Math.min(n-i,1))}var j=this.faux_grid;var l=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);this.last_cols=[];this.last_rows=[];this.collision_api=this.$helper.collision(j,this.options.collision);this.$preview_holder=e("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:l.width,height:l.height}}).appendTo(this.$el);if(this.options.draggable.start){this.options.draggable.start.call(this,k,m)}};c.on_drag=function(m,n){if(this.$player===null){return false}var j=this.options.widget_margins[0];var i=this.$preview_holder.attr("data-col");var l={left:n.position.left+this.baseX-(j*i),top:n.position.top+this.baseY};if(this.options.max_cols===Infinity){var k=this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1;if(k>=this.cols-1&&this.options.max_cols>=this.cols+1){this.add_faux_cols(1);this.set_dom_grid_width(this.cols+1);this.drag_api.set_limits((this.cols*this.min_widget_width)+((this.cols+1)*this.options.widget_margins[0]))}this.collision_api.set_colliders(this.faux_grid)}this.colliders_data=this.collision_api.get_closest_colliders(l);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);if(this.helper&&this.$player){this.$player.css({left:n.position.left,top:n.position.top})}if(this.options.draggable.drag){this.options.draggable.drag.call(this,m,n)
}};c.on_stop_drag=function(l,m){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging");var j=this.options.widget_margins[0];var i=this.$preview_holder.attr("data-col");m.position.left=m.position.left+this.baseX-(j*i);m.position.top=m.position.top+this.baseY;this.colliders_data=this.collision_api.get_closest_colliders(m.position);this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column);this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row);this.$changed=this.$changed.add(this.$player);if(this.options.collision.wait_for_mouseup){this.for_each_cell_occupied(this.placeholder_grid_data,function(p,o){if(this.is_widget(p,o)){this.move_widget_down(this.is_widget(p,o),this.placeholder_grid_data.size_y)}})}this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data);var k=this.placeholder_grid_data.col;var n=this.placeholder_grid_data.row;this.set_cells_player_occupies(k,n);this.$player.coords().grid.row=n;this.$player.coords().grid.col=k;if(this.options.draggable.stop){this.options.draggable.stop.call(this,l,m)}this.$player.addClass("player-revert").removeClass("player").attr({"data-col":k,"data-row":n}).css({left:"",top:""});this.$preview_holder.remove();this.$player=null;this.$helper=null;this.placeholder_grid_data={};this.player_grid_data={};this.cells_occupied_by_placeholder={};this.cells_occupied_by_player={};this.w_queue={};this.set_dom_grid_height();this.set_dom_grid_width();if(this.options.max_cols===Infinity){this.drag_api.set_limits((this.cols*this.min_widget_width)+((this.cols+1)*this.options.widget_margins[0]))}};c.on_start_resize=function(i,j){this.$resized_widget=j.$player.closest(".gs-w");this.resize_coords=this.$resized_widget.coords();this.resize_wgd=this.resize_coords.grid;this.resize_initial_width=this.resize_coords.coords.width;this.resize_initial_height=this.resize_coords.coords.height;this.resize_initial_sizex=this.resize_coords.grid.size_x;this.resize_initial_sizey=this.resize_coords.grid.size_y;this.resize_initial_col=this.resize_coords.grid.col;this.resize_last_sizex=this.resize_initial_sizex;this.resize_last_sizey=this.resize_initial_sizey;this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1);this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1];this.resize_min_size_x=(this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1);this.resize_min_size_y=(this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1);this.resize_initial_last_col=this.get_highest_occupied_cell().col;this.set_dom_grid_width(this.cols);this.resize_dir={right:j.$player.is("."+this.resize_handle_class+"-x"),bottom:j.$player.is("."+this.resize_handle_class+"-y")};if(!this.is_responsive()){this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]})}var k=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=e("<"+k+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el);this.$resized_widget.addClass("resizing");if(this.options.resize.start){this.options.resize.start.call(this,i,j,this.$resized_widget)}this.$el.trigger("gridster:resizestart")};c.on_stop_resize=function(i,j){this.$resized_widget.removeClass("resizing").css({width:"",height:"","min-width":"","min-height":""});delay(e.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""});if(this.options.resize.stop){this.options.resize.stop.call(this,i,j,this.$resized_widget)}this.$el.trigger("gridster:resizestop")},this),300);this.set_dom_grid_width();this.set_dom_grid_height();if(this.options.max_cols===Infinity){this.drag_api.set_limits(this.cols*this.min_widget_width)}};c.on_resize=function(y,t){var j=t.$helper.attr("class");var F="";if(j.match(/gs-resize-handle-\w+/i)!==null){F=j.match(/gs-resize-handle-\w+/i)[0].replace("gs-resize-handle-","")}var E=(t.pointer.diff_left);var D=(t.pointer.diff_top);var l=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0];var i=this.options.widget_base_dimensions[1];var H=this.options.widget_margins[0];var G=this.options.widget_margins[1];var A=this.resize_max_size_x;var n=this.resize_min_size_x;var z=this.resize_max_size_y;var k=this.resize_min_size_y;var p=this.options.max_cols===Infinity;var v;switch(F){case"se":var o=Math.ceil((E/(l+H*2))-0.2);var m=Math.ceil((D/(i+G*2))-0.2);break;case"e":var o=Math.ceil((E/(l+H*2))-0.2);var m=0;break;case"s":var o=0;var m=Math.ceil((D/(i+G*2))-0.2);break;default:var o=Math.ceil((E/(l+H*2))-0.2);var m=Math.ceil((D/(i+G*2))-0.2);break}var x=Math.max(1,this.resize_initial_sizex+o);var w=Math.max(1,this.resize_initial_sizey+m);
var J=Math.floor((this.container_width/this.min_widget_width)-this.resize_initial_col+1);var B=(J*this.min_widget_width)+((J-1)*H);x=Math.max(Math.min(x,A),n);x=Math.min(J,x);v=(A*l)+((x-1)*H);var q=Math.min(v,B);var s=(n*l)+((x-1)*H);w=Math.max(Math.min(w,z),k);var u=(z*i)+((w-1)*G);var I=(k*i)+((w-1)*G);if(this.resize_dir.right){w=this.resize_initial_sizey}else{if(this.resize_dir.bottom){x=this.resize_initial_sizex}}if(p){var r=this.resize_initial_col+x-1;if(p&&this.resize_initial_last_col<=r){this.set_dom_grid_width(Math.max(r+1,this.cols));if(this.cols<r){this.add_faux_cols(r-this.cols)}}}var C={};!this.resize_dir.bottom&&(C.width=Math.max(Math.min(this.resize_initial_width+E,q),s));!this.resize_dir.right&&(C.height=Math.max(Math.min(this.resize_initial_height+D,u),I));this.$resized_widget.css(C);if(x!==this.resize_last_sizex||w!==this.resize_last_sizey){this.resize_widget(this.$resized_widget,x,w,false);this.set_dom_grid_width(this.cols);this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":x,"data-sizey":w})}if(this.options.resize.resize){this.options.resize.resize.call(this,y,t,this.$resized_widget)}this.$el.trigger("gridster:resize");this.resize_last_sizex=x;this.resize_last_sizey=w};c.on_overlapped_column_change=function(k,o){if(!this.colliders_data.length){return this}var m=this.get_targeted_columns(this.colliders_data[0].el.data.col);var n=this.last_cols.length;var l=m.length;var j;for(j=0;j<l;j++){if(e.inArray(m[j],this.last_cols)===-1){(k||e.noop).call(this,m[j])}}for(j=0;j<n;j++){if(e.inArray(this.last_cols[j],m)===-1){(o||e.noop).call(this,this.last_cols[j])}}this.last_cols=m;return this};c.on_overlapped_row_change=function(k,l){if(!this.colliders_data.length){return this}var n=this.get_targeted_rows(this.colliders_data[0].el.data.row);var o=this.last_rows.length;var m=n.length;var j;for(j=0;j<m;j++){if(e.inArray(n[j],this.last_rows)===-1){(k||e.noop).call(this,n[j])}}for(j=0;j<o;j++){if(e.inArray(this.last_rows[j],n)===-1){(l||e.noop).call(this,this.last_rows[j])}}this.last_rows=n};c.set_player=function(o,y,k){var x=this;var p=false;if(!k){this.empty_cells_player_occupies()}var w=!k?x.colliders_data[0].el.data:{col:o};var s=w.col;var l=w.row||y;this.player_grid_data={col:s,row:l,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x};this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data);this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);var u=this.get_widgets_overlapped(this.player_grid_data);var q=this.player_grid_data.size_y;var r=this.player_grid_data.size_x;var j=this.cells_occupied_by_placeholder;var i=this;u.each(e.proxy(function(C,I){var A=e(I);var G=A.coords().grid;var H=j.cols[0]+r-1;var D=j.rows[0]+q-1;if(A.hasClass(i.options.static_class)){return true}if(i.options.collision.wait_for_mouseup&&i.drag_api.is_dragging){i.placeholder_grid_data.col=s;i.placeholder_grid_data.row=l;i.cells_occupied_by_placeholder=i.get_cells_occupied(i.placeholder_grid_data);i.$preview_holder.attr({"data-row":l,"data-col":s})}else{if(G.size_x<=r&&G.size_y<=q){if(!i.is_swap_occupied(j.cols[0],G.row,G.size_x,G.size_y)&&!i.is_player_in(j.cols[0],G.row)&&!i.is_in_queue(j.cols[0],G.row,A)){p=i.queue_widget(j.cols[0],G.row,A)}else{if(!i.is_swap_occupied(H,G.row,G.size_x,G.size_y)&&!i.is_player_in(H,G.row)&&!i.is_in_queue(H,G.row,A)){p=i.queue_widget(H,G.row,A)}else{if(!i.is_swap_occupied(G.col,j.rows[0],G.size_x,G.size_y)&&!i.is_player_in(G.col,j.rows[0])&&!i.is_in_queue(G.col,j.rows[0],A)){p=i.queue_widget(G.col,j.rows[0],A)}else{if(!i.is_swap_occupied(G.col,D,G.size_x,G.size_y)&&!i.is_player_in(G.col,D)&&!i.is_in_queue(G.col,D,A)){p=i.queue_widget(G.col,D,A)}else{if(!i.is_swap_occupied(j.cols[0],j.rows[0],G.size_x,G.size_y)&&!i.is_player_in(j.cols[0],j.rows[0])&&!i.is_in_queue(j.cols[0],j.rows[0],A)){p=i.queue_widget(j.cols[0],j.rows[0],A)}else{for(var F=0;F<r;F++){for(var z=0;z<q;z++){var B=j.cols[0]+F;var E=j.rows[0]+z;if(!i.is_swap_occupied(B,E,G.size_x,G.size_y)&&!i.is_player_in(B,E)&&!i.is_in_queue(B,E,A)){p=i.queue_widget(B,E,A);F=r;break}}}}}}}}}else{if(i.options.shift_larger_widgets_down&&!p){u.each(e.proxy(function(K,J){var L=e(J);if(i.can_go_down(L)&&L.coords().grid.row===i.player_grid_data.row){i.move_widget_down(L,i.player_grid_data.size_y);i.set_placeholder(s,l)}}))}}}i.clean_up_changed()}));if(p&&this.can_placeholder_be_set(s,l,r,q)){for(var v in this.w_queue){var t=parseInt(v.split("_")[0]);var n=parseInt(v.split("_")[1]);if(this.w_queue[v]!=="full"){this.new_move_widget_to(this.w_queue[v],t,n)}}this.set_placeholder(s,l)}if(!u.length){if(this.options.shift_widgets_up){var m=this.can_go_player_up(this.player_grid_data);if(m!==false){l=m}}if(this.can_placeholder_be_set(s,l,r,q)){this.set_placeholder(s,l)}}this.w_queue={};return{col:s,row:l}};c.is_swap_occupied=function(n,u,m,l){var k=false;for(var s=0;s<m;s++){for(var j=0;j<l;j++){var p=n+s;var q=u+j;var t=p+"_"+q;
if(this.is_occupied(p,q)){k=true}else{if(t in this.w_queue){if(this.w_queue[t]==="full"){k=true;continue}var o=this.w_queue[t];var i=o.coords().grid;if(!this.is_widget_under_player(i.col,i.row)){delete this.w_queue[t]}}}if(q>parseInt(this.options.max_rows)){k=true}if(p>parseInt(this.options.max_cols)){k=true}if(this.is_player_in(p,q)){k=true}}}return k};c.can_placeholder_be_set=function(j,q,m,l){var s=true;for(var p=0;p<m;p++){for(var i=0;i<l;i++){var n=j+p;var o=q+i;var k=this.is_widget(n,o);if(o>parseInt(this.options.max_rows)){s=false}if(n>parseInt(this.options.max_cols)){s=false}if(this.is_occupied(n,o)&&!this.is_widget_queued_and_can_move(k)){s=false}}}return s};c.queue_widget=function(k,t,i){var l=i;var q=l.coords().grid;var n=k+"_"+t;if(n in this.w_queue){return false}this.w_queue[n]=l;for(var p=0;p<q.size_x;p++){for(var j=0;j<q.size_y;j++){var m=k+p;var o=t+j;var s=m+"_"+o;if(s===n){continue}this.w_queue[s]="full"}}return true};c.is_widget_queued_and_can_move=function(j){var k=false;if(j===false){return false}for(var s in this.w_queue){if(this.w_queue[s]==="full"){continue}if(this.w_queue[s].attr("data-col")===j.attr("data-col")&&this.w_queue[s].attr("data-row")===j.attr("data-row")){k=true;var m=this.w_queue[s];var l=parseInt(s.split("_")[0]);var t=parseInt(s.split("_")[1]);var q=m.coords().grid;for(var p=0;p<q.size_x;p++){for(var i=0;i<q.size_y;i++){var n=l+p;var o=t+i;if(this.is_player_in(n,o)){k=false}}}}}return k};c.is_in_queue=function(j,n,o){var m=false;var l=j+"_"+n;if((l in this.w_queue)){if(this.w_queue[l]==="full"){m=true}else{var i=this.w_queue[l];var k=i.coords().grid;if(!this.is_widget_under_player(k.col,k.row)){delete this.w_queue[l];m=false}else{if(this.w_queue[l].attr("data-col")===o.attr("data-col")&&this.w_queue[l].attr("data-row")===o.attr("data-row")){delete this.w_queue[l];m=false}else{m=true}}}}return m};c.widgets_constraints=function(j){var i=e([]);var l;var k=[];var m=[];j.each(e.proxy(function(p,n){var q=e(n);var o=q.coords().grid;if(this.can_go_widget_up(o)){i=i.add(q);k.push(o)}else{m.push(o)}},this));l=j.not(i);return{can_go_up:d.sort_by_row_asc(k),can_not_go_up:d.sort_by_row_desc(m)}};c.manage_movements=function(j,k,i){e.each(j,e.proxy(function(o,m){var n=m;var q=n.el;var l=this.can_go_widget_up(n);if(l){this.move_widget_to(q,l);this.set_placeholder(k,l+n.size_y)}else{var p=this.can_go_player_up(this.player_grid_data);if(!p){var r=(i+this.player_grid_data.size_y)-n.row;if(this.can_go_down(q)){console.log("In Move Down!");this.move_widget_down(q,r);this.set_placeholder(k,i)}}}},this));return this};c.is_player=function(j,k){if(k&&!this.gridmap[j]){return false}var i=k?this.gridmap[j][k]:j;return i&&(i.is(this.$player)||i.is(this.$helper))};c.is_player_in=function(i,j){var k=this.cells_occupied_by_player||{};return e.inArray(i,k.cols)>=0&&e.inArray(j,k.rows)>=0};c.is_placeholder_in=function(i,j){var k=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(i)&&e.inArray(j,k.rows)>=0};c.is_placeholder_in_col=function(i){var j=this.cells_occupied_by_placeholder||[];return e.inArray(i,j.cols)>=0};c.is_empty=function(i,j){if(typeof this.gridmap[i]!=="undefined"){if(typeof this.gridmap[i][j]!=="undefined"&&this.gridmap[i][j]===false){return true}return false}return true};c.is_valid_col=function(j,i){if(this.options.max_cols===Infinity){return true}return this.cols>=this.calculate_highest_col(j,i)};c.is_valid_row=function(j,i){return this.rows>=this.calculate_highest_row(j,i)};c.calculate_highest_col=function(j,i){return j+(i||1)-1};c.calculate_highest_row=function(j,i){return j+(i||1)-1};c.is_occupied=function(i,j){if(!this.gridmap[i]){return false}if(this.gridmap[i][j]){return true}return false};c.is_widget=function(j,k){var i=this.gridmap[j];if(!i){return false}i=i[k];if(i){return i}return false};c.is_static=function(j,k){var i=this.gridmap[j];if(!i){return false}i=i[k];if(i){if(i.hasClass(this.options.static_class)){return true}}return false};c.is_widget_under_player=function(i,j){if(this.is_widget(i,j)){return this.is_player_in(i,j)}return false};c.get_widgets_under_player=function(j){j||(j=this.cells_occupied_by_player||{cols:[],rows:[]});var i=e([]);e.each(j.cols,e.proxy(function(l,k){e.each(j.rows,e.proxy(function(m,n){if(this.is_widget(k,n)){i=i.add(this.gridmap[k][n])}},this))},this));return i};c.set_placeholder=function(l,o){var k=e.extend({},this.placeholder_grid_data);var j=(l+k.size_x-1);if(j>this.cols){l=l-(j-l)}var p=this.placeholder_grid_data.row<o;var m=this.placeholder_grid_data.col!==l;this.placeholder_grid_data.col=l;this.placeholder_grid_data.row=o;this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);this.$preview_holder.attr({"data-row":o,"data-col":l});if(this.options.shift_player_up){if(p||m){var i=this.widgets_below({col:k.col,row:k.row,size_y:k.size_y,size_x:k.size_x});i.each(e.proxy(function(s,u){var t=e(u);var r=t.coords().grid;var q=this.can_go_widget_up(r);if(q){this.move_widget_to(t,q)}},this))}var n=this.get_widgets_under_player(this.cells_occupied_by_placeholder);
if(n.length){n.each(e.proxy(function(q,s){var r=e(s);this.move_widget_down(r,o+k.size_y-r.data("coords").grid.row)},this))}}};c.can_go_player_up=function(n){var k=n.row+n.size_y-1;var i=true;var j=[];var m=10000;var l=this.get_widgets_under_player();this.for_each_column_occupied(n,function(q){var o=this.gridmap[q];var p=k+1;j[q]=[];while(--p>0){if(this.is_empty(q,p)||this.is_player(q,p)||this.is_widget(q,p)&&o[p].is(l)){j[q].push(p);m=p<m?p:m}else{break}}if(j[q].length===0){i=false;return true}j[q].sort(function(s,r){return s-r})});if(!i){return false}return this.get_valid_rows(n,j,m)};c.can_go_widget_up=function(m){var k=m.row+m.size_y-1;var i=true;var j=[];var l=10000;this.for_each_column_occupied(m,function(p){var n=this.gridmap[p];j[p]=[];var o=k+1;while(--o>0){if(this.is_widget(p,o)&&!this.is_player_in(p,o)){if(!n[o].is(m.el)){break}}if(!this.is_player(p,o)&&!this.is_placeholder_in(p,o)&&!this.is_player_in(p,o)){j[p].push(o)}if(o<l){l=o}}if(j[p].length===0){i=false;return true}j[p].sort(function(r,q){return r-q})});if(!i){return false}return this.get_valid_rows(m,j,l)};c.get_valid_rows=function(j,s,q){var o=j.row;var m=j.row+j.size_y-1;var p=j.size_y;var i=q-1;var k=[];while(++i<=m){var n=true;e.each(s,function(r,t){if(e.isArray(t)&&e.inArray(i,t)===-1){n=false}});if(n===true){k.push(i);if(k.length===p){break}}}var l=false;if(p===1){if(k[0]!==o){l=k[0]||false}}else{if(k[0]!==o){l=this.get_consecutive_numbers_index(k,p)}}return l};c.get_consecutive_numbers_index=function(l,m){var k=l.length;var j=[];var p=true;var o=-1;for(var n=0;n<k;n++){if(p||l[n]===o+1){j.push(n);if(j.length===m){break}p=false}else{j=[];p=true}o=l[n]}return j.length>=m?l[j[0]]:false};c.get_widgets_overlapped=function(){var i=e([]);var k=[];var j=this.cells_occupied_by_player.rows.slice(0);j.reverse();e.each(this.cells_occupied_by_player.cols,e.proxy(function(m,l){e.each(j,e.proxy(function(n,p){if(!this.gridmap[l]){return true}var o=this.gridmap[l][p];if(this.is_occupied(l,p)&&!this.is_player(o)&&e.inArray(o,k)===-1){i=i.add(o);k.push(o)}},this))},this));return i};c.on_start_overlapping_column=function(i){this.set_player(i,undefined,false)};c.on_start_overlapping_row=function(i){this.set_player(undefined,i,false)};c.on_stop_overlapping_column=function(j){var i=this;if(this.options.shift_larger_widgets_down){this.for_each_widget_below(j,this.cells_occupied_by_player.rows[0],function(l,k){i.move_widget_up(this,i.player_grid_data.size_y)})}};c.on_stop_overlapping_row=function(l){var j=this;var k=this.cells_occupied_by_player.cols;if(this.options.shift_larger_widgets_down){for(var m=0,i=k.length;m<i;m++){this.for_each_widget_below(k[m],l,function(o,n){j.move_widget_up(this,j.player_grid_data.size_y)})}}};c.new_move_widget_to=function(l,i,k){var j=l.coords().grid;this.remove_from_gridmap(j);j.row=k;j.col=i;this.add_to_gridmap(j);l.attr("data-row",k);l.attr("data-col",i);this.update_widget_position(j,l);this.$changed=this.$changed.add(l);return this};c.move_widget=function(n,l,i,m){var j=n.coords().grid;var k={col:l,row:i,size_x:j.size_x,size_y:j.size_y};this.mutate_widget_in_gridmap(n,j,k);this.set_dom_grid_height();this.set_dom_grid_width();if(m){m.call(this,k.col,k.row)}return n};c.move_widget_to=function(n,m){var i=this;var k=n.coords().grid;var l=this.widgets_below(n);var j=this.can_move_to(k,k.col,m);if(j===false){return false}this.remove_from_gridmap(k);k.row=m;this.add_to_gridmap(k);n.attr("data-row",m);this.$changed=this.$changed.add(n);l.each(function(p,r){var q=e(r);var o=q.coords().grid;var s=i.can_go_widget_up(o);if(s&&s!==o.row){i.move_widget_to(q,s)}});return this};c.move_widget_up=function(m,l){if(l===undefined){return false}var k=m.coords().grid;var i=k.row;var j=[];l||(l=1);if(!this.can_go_up(m)){return false}this.for_each_column_occupied(k,function(n){if(e.inArray(m,j)===-1){var o=m.coords().grid;var p=i-l;p=this.can_go_up_to_row(o,n,p);if(!p){return true}this.remove_from_gridmap(o);o.row=p;this.add_to_gridmap(o);m.attr("data-row",o.row);this.$changed=this.$changed.add(m);j.push(m)}})};c.move_widget_down=function(i,m){var j,p,o,n;if(m<=0){return false}j=i.coords().grid;p=j.row;o=[];n=m;if(!i){return false}if(e.inArray(i,o)===-1){var l=i.coords().grid;var q=p+m;var k=this.widgets_below(i);this.remove_from_gridmap(l);k.each(e.proxy(function(s,v){var u=e(v);var t=u.coords().grid;var r=this.displacement_diff(t,l,n);if(r>0){this.move_widget_down(u,r)}},this));l.row=q;this.update_widget_position(l,i);i.attr("data-row",l.row);this.$changed=this.$changed.add(i);o.push(i)}};c.can_go_up_to_row=function(k,j,q){var s=true;var m=[];var o=k.row;var i;this.for_each_column_occupied(k,function(r){m[r]=[];i=o;while(i--){if(this.is_empty(r,i)&&!this.is_placeholder_in(r,i)){m[r].push(i)}else{break}}if(!m[r].length){s=false;return true}});if(!s){return false}i=q;for(i=1;i<o;i++){var n=true;for(var p=0,l=m.length;p<l;p++){if(m[p]&&e.inArray(i,m[p])===-1){n=false}}if(n===true){s=i;break}}return s};c.displacement_diff=function(l,m,o){var j=l.row;
var n=[];var k=m.row+m.size_y;this.for_each_column_occupied(l,function(p){var s=0;for(var q=k;q<j;q++){if(this.is_empty(p,q)){s=s+1}}n.push(s)});var i=Math.max.apply(Math,n);o=(o-i);return o>0?o:0};c.widgets_below=function(k){var i=e([]);var m=e.isPlainObject(k)?k:k.coords().grid;if(m===undefined){return i}var j=this;var l=m.row+m.size_y-1;this.for_each_column_occupied(m,function(n){j.for_each_widget_below(n,l,function(p,o){if(!j.is_player(this)&&e.inArray(this,i)===-1){i=i.add(this);return true}})});return d.sort_by_row_asc(i)};c.set_cells_player_occupies=function(i,j){this.remove_from_gridmap(this.placeholder_grid_data);this.placeholder_grid_data.col=i;this.placeholder_grid_data.row=j;this.add_to_gridmap(this.placeholder_grid_data,this.$player);return this};c.empty_cells_player_occupies=function(){this.remove_from_gridmap(this.placeholder_grid_data);return this};c.can_go_down=function(k){var j=true;var i=this;if(k.hasClass(this.options.static_class)){j=false}this.widgets_below(k).each(function(){if(e(this).hasClass(i.options.static_class)){j=false}});return j};c.can_go_up=function(j){var m=j.coords().grid;var k=m.row;var l=k-1;var i=true;if(k===1){return false}this.for_each_column_occupied(m,function(n){if(this.is_occupied(n,l)||this.is_player(n,l)||this.is_placeholder_in(n,l)||this.is_player_in(n,l)){i=false;return true}});return i};c.can_move_to=function(m,k,o){var n=m.el;var l={size_y:m.size_y,size_x:m.size_x,col:k,row:o};var i=true;if(this.options.max_cols!==Infinity){var j=k+m.size_x-1;if(j>this.cols){return false}}if(this.options.max_rows<o+m.size_y-1){return false}this.for_each_cell_occupied(l,function(r,q){var p=this.is_widget(r,q);if(p&&(!m.el||p.is(n))){i=false}});return i};c.get_targeted_columns=function(l){var i=(l||this.player_grid_data.col)+(this.player_grid_data.size_x-1);var k=[];for(var j=l;j<=i;j++){k.push(j)}return k};c.get_targeted_rows=function(j){var i=(j||this.player_grid_data.row)+(this.player_grid_data.size_y-1);var k=[];for(var l=j;l<=i;l++){k.push(l)}return k};c.get_cells_occupied=function(m){var k={cols:[],rows:[]};var l;if(arguments[1] instanceof e){m=arguments[1].coords().grid}for(l=0;l<m.size_x;l++){var j=m.col+l;k.cols.push(j)}for(l=0;l<m.size_y;l++){var n=m.row+l;k.rows.push(n)}return k};c.for_each_cell_occupied=function(i,j){this.for_each_column_occupied(i,function(k){this.for_each_row_occupied(i,function(l){j.call(this,k,l)})});return this};c.for_each_column_occupied=function(l,m){for(var k=0;k<l.size_x;k++){var j=l.col+k;m.call(this,j,l)}};c.for_each_row_occupied=function(k,m){for(var j=0;j<k.size_y;j++){var l=k.row+j;m.call(this,l,k)}};c.clean_up_changed=function(){var i=this;i.$changed.each(function(){if(i.options.shift_larger_widgets_down){i.move_widget_up(e(this))}})};c._traversing_widgets=function(o,r,k,u,s){var t=this.gridmap;if(!t[k]){return}var n,q;var m=o+"/"+r;if(arguments[2] instanceof e){var i=arguments[2].coords().grid;k=i.col;u=i.row;s=arguments[3]}var j=[];var p=u;var l={"for_each/above":function(){while(p--){if(p>0&&this.is_widget(k,p)&&e.inArray(t[k][p],j)===-1){n=s.call(t[k][p],k,p);j.push(t[k][p]);if(n){break}}}},"for_each/below":function(){for(p=u+1,q=t[k].length;p<q;p++){if(this.is_widget(k,p)&&e.inArray(t[k][p],j)===-1){n=s.call(t[k][p],k,p);j.push(t[k][p])}}}};if(l[m]){l[m].call(this)}};c.for_each_widget_above=function(i,j,k){this._traversing_widgets("for_each","above",i,j,k);return this};c.for_each_widget_below=function(i,j,k){this._traversing_widgets("for_each","below",i,j,k);return this};c.get_highest_occupied_cell=function(){var i;var l=this.gridmap;var m=l[1].length;var j=[],k=[];for(var n=l.length-1;n>=1;n--){for(i=m-1;i>=1;i--){if(this.is_widget(n,i)){j.push(i);k.push(n);break}}}return{col:Math.max.apply(Math,k),row:Math.max.apply(Math,j)}};c.get_widgets_in_range=function(m,q,l,p){var j=e([]);var o,i,k,n;for(o=l;o>=m;o--){for(i=p;i>=q;i--){k=this.is_widget(o,i);if(k!==false){n=k.data("coords").grid;if(n.col>=m&&n.col<=l&&n.row>=q&&n.row<=p){j=j.add(k)}}}}return j};c.get_widgets_at_cell=function(i,j){return this.get_widgets_in_range(i,j,i,j)};c.get_widgets_from=function(j,k){var i=e();if(j){i=i.add(this.$widgets.filter(function(){var l=parseInt(e(this).attr("data-col"));return(l===j||l>j)}))}if(k){i=i.add(this.$widgets.filter(function(){var l=parseInt(e(this).attr("data-row"));return(l===k||l>k)}))}return i};c.set_dom_grid_height=function(i){if(typeof i==="undefined"){var j=this.get_highest_occupied_cell().row;i=((j+1)*this.options.widget_margins[1])+(j*this.min_widget_height)}this.container_height=i;this.$el.css("height",this.container_height);return this};c.set_dom_grid_width=function(j){if(typeof j==="undefined"){j=this.get_highest_occupied_cell().col}var i=(this.options.max_cols===Infinity?this.options.max_cols:this.cols);j=Math.min(i,Math.max(j,this.options.min_cols));this.container_width=((j+1)*this.options.widget_margins[0])+(j*this.min_widget_width);if(this.is_responsive()){this.$el.css({"min-width":"100%","max-width":"100%"});return this
}this.$el.css("width",this.container_width);return this};c.is_responsive=function(){return this.options.autogenerate_stylesheet&&this.options.widget_base_dimensions[0]==="auto"&&this.options.max_cols!==Infinity};c.get_responsive_col_width=function(){var i=this.cols||this.options.max_cols;return(this.$el.width()-((i+1)*this.options.widget_margins[0]))/i};c.resize_responsive_layout=function(){this.min_widget_width=this.get_responsive_col_width();this.generate_stylesheet();this.update_widgets_dimensions();this.drag_api.set_limits((this.cols*this.min_widget_width)+((this.cols+1)*this.options.widget_margins[0]));return this};c.toggle_collapsed_grid=function(j,i){if(j){this.$widgets.css({"margin-top":i.widget_margins[0],"margin-bottom":i.widget_margins[0],"min-height":i.widget_base_dimensions[1]});this.$el.addClass("collapsed");if(this.resize_api){this.disable_resize()}if(this.drag_api){this.disable()}}else{this.$widgets.css({"margin-top":"auto","margin-bottom":"auto","min-height":"auto"});this.$el.removeClass("collapsed");if(this.resize_api){this.enable_resize()}if(this.drag_api){this.enable()}}return this};c.generate_stylesheet=function(p){var o="";var m;var l=this.is_responsive()&&this.options.responsive_breakpoint&&(e(window).width()<this.options.responsive_breakpoint);p||(p={});p.cols||(p.cols=this.cols);p.rows||(p.rows=this.rows);p.namespace||(p.namespace=this.options.namespace);p.widget_base_dimensions||(p.widget_base_dimensions=this.options.widget_base_dimensions);p.widget_margins||(p.widget_margins=this.options.widget_margins);if(this.is_responsive()){p.widget_base_dimensions=[this.get_responsive_col_width(),p.widget_base_dimensions[1]];this.toggle_collapsed_grid(l,p)}var k=e.param(p);if(e.inArray(k,d.generated_stylesheets)>=0){return false}this.generated_stylesheets.push(k);d.generated_stylesheets.push(k);for(m=1;m<=p.cols+1;m++){o+=(p.namespace+' [data-col="'+m+'"] { left:'+(l?this.options.widget_margins[0]:((m*p.widget_margins[0])+((m-1)*p.widget_base_dimensions[0])))+"px; }\n")}for(m=1;m<=p.rows+1;m++){o+=(p.namespace+' [data-row="'+m+'"] { top:'+((m*p.widget_margins[1])+((m-1)*p.widget_base_dimensions[1]))+"px; }\n")}for(var q=1;q<=p.rows;q++){o+=(p.namespace+' [data-sizey="'+q+'"] { height:'+(l?"auto":((q*p.widget_base_dimensions[1])+((q-1)*p.widget_margins[1])))+(l?"":"px")+"; }\n")}for(var j=1;j<=p.cols;j++){var n=((j*p.widget_base_dimensions[0])+((j-1)*p.widget_margins[0]));o+=(p.namespace+' [data-sizex="'+j+'"] { width:'+(l?(this.$wrapper.width()-this.options.widget_margins[0]*2):n>this.$wrapper.width()?this.$wrapper.width():n)+"px; }\n")}this.remove_style_tags();return this.add_style_tag(o)};c.add_style_tag=function(j){var l=document;var k="gridster-stylesheet";if(this.options.namespace!==""){k=k+"-"+this.options.namespace}if(!document.getElementById(k)){var i=l.createElement("style");i.id=k;l.getElementsByTagName("head")[0].appendChild(i);i.setAttribute("type","text/css");if(i.styleSheet){i.styleSheet.cssText=j}else{i.appendChild(document.createTextNode(j))}this.remove_style_tags();this.$style_tags=this.$style_tags.add(i)}return this};c.remove_style_tags=function(){var i=d.generated_stylesheets;var j=this.generated_stylesheets;this.$style_tags.remove();d.generated_stylesheets=e.map(i,function(k){if(e.inArray(k,j)===-1){return k}})};c.generate_faux_grid=function(j,k){this.faux_grid=[];this.gridmap=[];var i;var l;for(i=k;i>0;i--){this.gridmap[i]=[];for(l=j;l>0;l--){this.add_faux_cell(l,i)}}return this};c.add_faux_cell=function(k,i){var j=e({left:this.baseX+((i-1)*this.min_widget_width),top:this.baseY+(k-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:i,row:k,original_col:i,original_row:k}).coords();if(!e.isArray(this.gridmap[i])){this.gridmap[i]=[]}if(typeof this.gridmap[i][k]==="undefined"){this.gridmap[i][k]=false}this.faux_grid.push(j);return this};c.add_faux_rows=function(l){l=window.parseInt(l,10);var j=this.rows;var i=j+parseInt(l||1);for(var k=i;k>j;k--){for(var m=this.cols;m>=1;m--){this.add_faux_cell(k,m)}}this.rows=i;if(this.options.autogenerate_stylesheet){this.generate_stylesheet()}return this};c.add_faux_cols=function(l){l=window.parseInt(l,10);var j=this.cols;var i=j+parseInt(l||1);i=Math.min(i,this.options.max_cols);for(var m=j+1;m<=i;m++){for(var k=this.rows;k>=1;k--){this.add_faux_cell(k,m)}}this.cols=i;if(this.options.autogenerate_stylesheet){this.generate_stylesheet()}return this};c.recalculate_faux_grid=function(){var i=this.$wrapper.width();this.baseX=(g.width()-i)/2;this.baseY=this.$wrapper.offset().top;if(this.$wrapper.css("position")==="relative"){this.baseX=this.baseY=0}e.each(this.faux_grid,e.proxy(function(j,k){this.faux_grid[j]=k.update({left:this.baseX+(k.data.col-1)*this.min_widget_width,top:this.baseY+(k.data.row-1)*this.min_widget_height})},this));if(this.is_responsive()){this.resize_responsive_layout()}if(this.options.center_widgets){this.center_widgets()}return this};c.resize_widget_dimensions=function(i){if(i.widget_margins){this.options.widget_margins=i.widget_margins
}if(i.widget_base_dimensions){this.options.widget_base_dimensions=i.widget_base_dimensions}this.$widgets.each(e.proxy(function(j,k){var l=e(k);this.resize_widget(l)},this));this.generate_grid_and_stylesheet();this.get_widgets_from_DOM();this.set_dom_grid_height();this.set_dom_grid_width();return this};c.get_widgets_from_DOM=function(){var i=this.$widgets.map(e.proxy(function(k,m){var l=e(m);return this.dom_to_coords(l)},this));i=d.sort_by_row_and_col_asc(i);var j=e(i).map(e.proxy(function(l,k){return this.register_widget(k)||null},this));if(j.length){this.$el.trigger("gridster:positionschanged")}return this};c.get_num_widgets=function(){return this.$widgets.size()};c.set_num_columns=function(j){var k=this.options.max_cols;var m=Math.floor(j/(this.min_widget_width+this.options.widget_margins[0]))+this.options.extra_cols;var l=this.$widgets.map(function(){return e(this).attr("data-col")}).get();l.length||(l=[0]);var i=Math.max.apply(Math,l);this.cols=Math.max(i,m,this.options.min_cols);if(k!==Infinity&&k>=i&&k<this.cols){this.cols=k}if(this.drag_api){this.drag_api.set_limits((this.cols*this.min_widget_width)+((this.cols+1)*this.options.widget_margins[0]))}};c.generate_grid_and_stylesheet=function(){var j=this.$wrapper.width();this.set_num_columns(j);var i=this.options.extra_rows;this.$widgets.each(function(l,k){i+=(+e(k).attr("data-sizey"))});this.rows=this.options.max_rows;this.baseX=(g.width()-j)/2;this.baseY=this.$wrapper.offset().top;if(this.options.autogenerate_stylesheet){this.generate_stylesheet()}return this.generate_faux_grid(this.rows,this.cols)};c.destroy=function(i){this.$el.removeData("gridster");e.each(this.$widgets,function(){e(this).removeData("coords")});g.unbind(".gridster");if(this.drag_api){this.drag_api.destroy()}if(this.resize_api){this.resize_api.destroy()}this.$widgets.each(function(j,k){e(k).coords().destroy()});if(this.resize_api){this.resize_api.destroy()}this.remove_style_tags();i&&this.$el.remove();return this};e.fn.gridster=function(i){return this.each(function(){var j=e(this);if(!j.data("gridster")){j.data("gridster",new d(this,i))}})};return d}));(function(a,b){if(typeof exports==="object"){module.exports=b(require("jquery"),require("./jquery.gridster.js"))}else{if(typeof define==="function"&&define.amd){define(["jquery","gridster"],b)}else{a.Gridster=b(a.$||a.jQuery,a.Gridster)}}}(this,function(c,b){var a=b.prototype;a.widgets_in_col=function(d){if(!this.gridmap[d]){return false}for(var e=this.gridmap[d].length-1;e>=0;e--){if(this.is_widget(d,e)!==false){return true}}return false};a.widgets_in_row=function(e){for(var d=this.gridmap.length;d>=1;d--){if(this.is_widget(d,e)!==false){return true}}return false};a.get_bottom_most_occupied_cell=function(){var e=0;var d=0;this.for_each_cell(function(f,h,g){if(f&&g>e){e=g;d=h}});return{col:d,row:e}};a.get_right_most_occupied_cell=function(){var e=0;var d=0;this.for_each_cell(function(f,h,g){if(f){e=g;d=h;return false}});return{col:d,row:e}};a.for_each_cell=function(j,d){d||(d=this.gridmap);var h=d.length;var g=d[1].length;cols_iter:for(var i=h-1;i>=1;i--){for(var f=g-1;f>=1;f--){var e=d[i]&&d[i][f];if(j){if(j.call(this,e,i,f)===false){break cols_iter}else{continue}}}}};a.next_position_in_range=function(l,k){l||(l=1);k||(k=1);var j=this.gridmap;var i=j.length;var h=[];var e;for(var g=1;g<i;g++){e=this.options.max_rows||j[g].length;for(var d=1;d<=e;d++){var f=this.can_move_to({size_x:l,size_y:k},g,d);if(f){h.push({col:g,row:d,size_y:k,size_x:l})}}}if(h.length>=1){return b.sort_by_col_asc(h)[0]}return false};a.closest_to_right=function(d,f){if(!this.gridmap[d]){return false}var e=this.gridmap.length-1;for(var g=d;g<=e;g++){if(this.gridmap[g][f]){return{col:g,row:f}}}return false};a.closest_to_left=function(d,e){if(!this.gridmap[d]){return false}for(var f=d;f>=1;f--){if(this.gridmap[f][e]){return{col:f,row:e}}}return false};return b}));