(function(){!function(t,e){var i;return i=function(){function i(i,o){this.settings=t.extend(this.settings,o),this.$el=t(i),t(e).resize(function(t){return function(){return t.refresh()}}(this))}return i.prototype.settings={opacity:.8,disableZIndex:!1},i.prototype.start=function(){var t,e,i,o;if(this._overlay_visible())return!1;for(this._add_overlay_layer(),o=this.$el.find("*[data-intro]:visible"),e=0,i=o.length;i>e;e++)t=o[e],this._show_element(t);return this.$el.trigger("chardinJs:start")},i.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()},i.prototype.refresh=function(){var t,e,i,o,s;if(this._overlay_visible()){for(o=this.$el.find("*[data-intro]:visible"),s=[],e=0,i=o.length;i>e;e++)t=o[e],s.push(this._position_helper_layer(t));return s}return this},i.prototype.stop=function(){return this.$el.find(".chardinjs-overlay").fadeOut(function(){return t(this).remove()}),this.$el.find(".chardinjs-helper-layer").remove(),this.$el.find(".chardinjs-show-element").removeClass("chardinjs-show-element"),this.$el.find(".chardinjs-relative-position").removeClass("chardinjs-relative-position"),e.removeEventListener?e.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this.$el.trigger("chardinJs:stop")},i.prototype._overlay_visible=function(){return 0!==this.$el.find(".chardinjs-overlay").length},i.prototype._add_overlay_layer=function(){var t,e,i;return this._overlay_visible()?!1:(e=document.createElement("div"),i="",e.className="chardinjs-overlay","BODY"===this.$el.prop("tagName")?(i+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",e.setAttribute("style",i)):(t=this._get_offset(this.$el.get()[0]),t&&(i+="width: "+t.width+"px; height:"+t.height+"px; top:"+t.top+"px;left: "+t.left+"px;",e.setAttribute("style",i))),this.$el.get()[0].appendChild(e),e.onclick=function(t){return function(){return t.stop()}}(this),setTimeout(function(t){return function(){return i+="opacity: "+t.settings.opacity+";opacity: "+t.settings.opacity+";-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity="+Math.round(100*t.settings.opacity)+")';filter: alpha(opacity="+Math.round(100*t.settings.opacity)+");",e.setAttribute("style",i)}}(this),10))},i.prototype._get_position=function(t){var e,i;return e=t.getAttribute("data-position"),(null!=(i=e.split(":"))?i[0]:void 0)||e||"bottom"},i.prototype._get_offset_override=function(t){var e,i;return e=t.getAttribute("data-position"),1+parseInt((null!=(i=e.split(":"))?i[1]:void 0)||0,10)/100||1},i.prototype._place_tooltip=function(e){var i,o,s,r,n,a,l;switch(a=t(e).data("tooltip_layer"),l=this._get_offset(a),a.style.top=null,a.style.right=null,a.style.bottom=null,a.style.left=null,this._get_position(e)){case"top":case"bottom":s=this._get_offset(e),n=s.width,o=t(a).width(),a.style.left=""+(n/2*this._get_offset_override(e)-l.width/2)+"px";break;case"left":case"right":s=this._get_offset(e),r=s.height,i=t(a).height(),a.style.top=""+(r/2*this._get_offset_override(e)-l.height/2)+"px"}switch(o&&t(a).width(o),i&&t(a).height(i),this._get_position(e)){case"left":return a.style.left=130-l.width+"px";case"right":return a.style.right=110-l.width+"px";case"bottom":return a.style.bottom="-"+l.height+"px";case"top":return a.style.top="-"+l.height+"px"}},i.prototype._position_helper_layer=function(e){var i,o;return o=t(e).data("helper_layer"),i=this._get_offset(e),o.setAttribute("style","width: "+(i.width-3)+"px; height:"+i.height+"px; top:"+i.top+"px; left: "+i.left+"px;")},i.prototype._show_element=function(e){var i,o,s,r;return o=this._get_offset(e),s=document.createElement("div"),r=document.createElement("div"),t(e).data("helper_layer",s).data("tooltip_layer",r),e.id&&s.setAttribute("data-id",e.id),s.className="chardinjs-helper-layer chardinjs-"+this._get_position(e),this._position_helper_layer(e),this.$el.get()[0].appendChild(s),r.className="chardinjs-tooltip chardinjs-"+this._get_position(e),r.innerHTML="<div class='chardinjs-tooltiptext'>"+e.getAttribute("data-intro")+"</div>",s.appendChild(r),this._place_tooltip(e),this.settings.disableZIndex||(e.className+=" chardinjs-show-element"),i="",e.currentStyle?i=e.currentStyle.position:document.defaultView&&document.defaultView.getComputedStyle&&(i=document.defaultView.getComputedStyle(e,null).getPropertyValue("position")),i=i.toLowerCase(),"absolute"!==i&&"relative"!==i?e.className+=" chardinjs-relative-position":void 0},i.prototype._get_offset=function(t){var e,i,o;for(e={width:t.offsetWidth,height:t.offsetHeight},i=0,o=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)i+=t.offsetLeft,o+=t.offsetTop,t=t.offsetParent;return e.top=o,e.left=i,e},i}(),t.fn.extend({chardinJs:function(e,o){var s,r;return null==o&&(o={}),s=t(this[0]),r=s.data("chardinJs"),r||s.data("chardinJs",r=new i(this,o)),"string"==typeof e&&r[e].apply(r),r}})}(window.jQuery,window)}).call(this);