!function(r){var e=[].slice;r.whenAll=function(n){function t(r,n,t){return function(){!(t===o)&&c++,l.notifyWith(n[r]=this,t[r]=e.call(arguments)),--a||l[(c?"reject":"resolve")+"With"](n,t)}}for(var i,o=1==arguments.length&&r.isArray(n)?n:e.call(arguments),s=o.length,a=s,l=r.Deferred(),u=0,c=0,f=Array(s),h=Array(s),y=Array(s);s>u;u++)(i=o[u])&&r.isFunction(i.promise)?i.promise().done(t(u,y,o)).fail(t(u,f,h)):(l.notifyWith(this,i),--a);return a||l.resolveWith(y,o),l.promise()}}(jQuery);